CREATE DATABASE QLSIEUTHI
USE QLSIEUTHI

CREATE TABLE LOAISP
(
	MALOAI CHAR(10) NOT NULL PRIMARY KEY,
	TENLOAI NVARCHAR(100),
	DVT CHAR(10)
)

CREATE TABLE SANPHAM
(
	MASP CHAR(10) NOT NULL PRIMARY KEY,
	TENSP NVARCHAR(100),
	GIABAN FLOAT,
	DACDIEM NVARCHAR(100),
	HSD DATE,
	MALOAI CHAR(10),
	CONSTRAINT FK_SP_LOAI FOREIGN KEY (MALOAI) REFERENCES LOAISP(MALOAI)
)

CREATE TABLE KHO
(
	MAKHO CHAR(10) NOT NULL PRIMARY KEY,
	TENKHO NVARCHAR(100),
	SDT CHAR(10),
	DIACHI NVARCHAR(100)

)
CREATE TABLE CTKHO
(
	MAKHO CHAR(10) NOT NULL,
	MASP CHAR(10) NOT NULL,
	SLTON INT,
	CONSTRAINT PK_CTKHO PRIMARY KEY (MAKHO,MASP),
	CONSTRAINT FK_CT_K FOREIGN KEY (MAKHO) REFERENCES KHO(MAKHO),
	CONSTRAINT FK_CT_SP FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP)
)
CREATE TABLE SIEUTHI
(
	MAST CHAR(10) NOT NULL PRIMARY KEY,
	TENST NVARCHAR(100),
	DIACHI NVARCHAR(100),
	SDT CHAR(10),
	MAKHO CHAR(10),
	CONSTRAINT FK_ST_K FOREIGN KEY (MAKHO) REFERENCES KHO(MAKHO)
)

CREATE TABLE NHANVIEN
(	
	MANV CHAR(10) NOT NULL PRIMARY KEY,
	TENNV NVARCHAR(100),
	SDT CHAR(10),
	NGAYSINH DATE,
	DIACHI NVARCHAR(100),
	NGAYVAOLAM DATE,
	HSLUONG INT,
	CHUCVU CHAR(10),
	MAST CHAR(10),
	CONSTRAINT FK_NV_ST FOREIGN KEY (MAST) REFERENCES SIEUTHI(MAST)
	
)
CREATE TABLE KHACHHANG
(
	MAKHACH CHAR(10) NOT NULL PRIMARY KEY,
	TENKHACH NVARCHAR(100),
	GIOITINH CHAR(10),
	NGAYSINH DATE,
	DIACHI NVARCHAR(100),
	SDT CHAR(10),
	DAMUA FLOAT
)


CREATE TABLE NHAPHANG
(
	MANH CHAR(10) NOT NULL PRIMARY KEY,
	NGAYNHAP DATE,
	MAKHO CHAR(10),
	TONGTIENNHAP FLOAT,
	GHICHU NVARCHAR(100),
	MANV CHAR(10),
	CONSTRAINT FK_NHAP_KHO FOREIGN KEY (MAKHO) REFERENCES KHO(MAKHO),
	CONSTRAINT FK_NHAP_NV FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV)
)
CREATE TABLE CTNHAP
(
	MANH CHAR(10) NOT NULL ,
	MASP CHAR(10) NOT NULL,
	DONGIANHAP FLOAT,
	SL INT,
	CONSTRAINT PK_CTN PRIMARY KEY (MANH,MASP),
	CONSTRAINT FK_CT_NH FOREIGN KEY (MANH) REFERENCES NHAPHANG(MANH),
	CONSTRAINT FK_CtnSP FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP)
)
CREATE TABLE HOADON
(
	MAHD CHAR(10) NOT NULL PRIMARY KEY,
	NGAYIN DATE,
	MAKHACH CHAR(10),
	TRANGTHAI NVARCHAR(100),
	TONGTIEN FLOAT,
	MANV CHAR(10),
	CONSTRAINT FK_HD_KHACH FOREIGN KEY (MAKHACH) REFERENCES KHACHHANG(MAKHACH),
	CONSTRAINT FK_HD_NV FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV)

)
CREATE TABLE CTHD
(
	MAHD CHAR(10) NOT NULL,
	MASP CHAR(10) NOT NULL,
	SL INT, 
	DONGIA FLOAT,
	MAST CHAR(10),
	CONSTRAINT PK_HD PRIMARY KEY (MAHD,MASP),
	CONSTRAINT FK_HD_HD FOREIGN KEY (MAHD) REFERENCES HOADON(MAHD),
	CONSTRAINT FK_HD_SP FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP),
	CONSTRAINT FK_HD_ST FOREIGN KEY (MAST) REFERENCES SIEUTHI(MAST)
)



INSERT INTO LOAISP
VALUES 
('L01',N'ĐỒ GIA DỤNG',N'CÁI'),
('L02',N'THỰC PHẨM SỐNG',N'KG'),
('L03',N'RAU CỦ QUẢ',N'KG'),
('L04',N'BÁNH KẸO',N'GÓI'),
('L05',N'MỸ PHẨM',N'CHAI')


INSERT INTO SANPHAM
VALUES 
('SP01',N'QUẠT HƠI NƯỚC',9500000,N'TRANG BỊ THÊM HƠI NƯỚC LÀM MÁT','13/04/2024','L01'),
('SP02',N'CÁ THU',95000,N'CÁ THU TƯƠI SỐNG','13/06/2021','L02'),
('SP03',N'ỚT CHUÔNG',7000,N'ỚT CHUÔNG LÂM ĐỒNG','20/04/2021','L03'),
('SP04',N'KẸO DẺO',20000,N'KẸO DẺO CHOCO','23/09/2024','L04'),
('SP05',N'SON M.A.C',500000,N'ĐƯỢC NHẬP KHẨU TỪ CANADA','14/05/2027','L05')


SET DATEFORMAT DMY
INSERT INTO NHANVIEN
VALUES 
('NV01',N'LA THANH HUYỀN','09392188','02/04/2001',N'12 BÌNH HƯNG HÒA P4 QUẬN TÂN PHÚ','30/04/2019',5,N'NHÂN VIÊN ','ST01'),
('NV02',N'LÃ QUANG NHẬT','09309339','13/12/1999',N'1 CMT8 P10 QUẬN TÂN BÌNH','11/04/2018',3,N'NHÂN VIÊN ','ST02'),
('NV03',N'CHU HUYỀN TRANG','09317771','02/09/2000',N'22 KÊNH TÂN HÓA P4 QUẬN BÌNH TÂN','23/04/2020',4,N'NHÂN VIÊN ','ST03'),
('NV04',N'TRƯƠNG TAM PHONG','09399182','12/07/1999',N'13 TRẦN QUANG DIỆU HÒA P1 QUẬN 3','24/04/2019',6,N'NHÂN VIÊN','ST04'),
('NV05',N'CAO THANH SANG','093002222','22/06/1998',N'32 PASTEUR P3 QUẬN 1','13/05/2010',3,N'NHÂN VIÊN ','ST05')



INSERT INTO SIEUTHI
VALUES 
('ST01',N'COOPMAST',N'12 NGUYỄN TRUNG CHÁNH P12 QUẬN 10','030911010','KH01'),
('ST02',N'EMART',N'42 NGUYỄN OANH P10 QUẬN GÒ VẤP','032929293','KH02'),
('ST03',N'BIGC',N'11 HỒ BÁ KIỆN P12 QUẬN 10','0302020202','KH03'),
('ST04',N'AEON',N'56 HUỲNH TẤN PHÁT P6 QUẬN 7','03002928','KH04'),
('ST05',N'VINMART',N'24 LÊ LAI P6 QUẬN 2','093383833','KH05')


INSERT INTO KHO 
VALUES 
('KH01',N'KHO VẬN ST1','09319393',N'1 VĨNH LỘC A P5 QUẬN TÂN PHÚ '),
('KH02',N'KHO VẬN ST2','05282828',N'20 KÊNH TÂN HÓA P5 QUẬN TÂN PHÚ'),
('KH03',N'KHO VẬN ST3','07777111',N'654 CMT8 P10 QUẬN 3'),
('KH04',N'KHO VẬN ST4','09393933',N'100 HUỲNH TẤN PHÁT P9 QUẬN 7'),
('KH05',N'KHO VẬN ST5','08111111',N'2 VĨNH LỘC B P10 QUẬN TÂN PHÚ ')



INSERT INTO CTKHO
VALUES 
('KH01','SP01',201),
('KH02','SP02',38),
('KH03','SP03',98),
('KH04','SP04',90),
('KH05','SP05',300)



SET DATEFORMAT DMY
INSERT INTO NHAPHANG
VALUES 
('NH01','12/03/2008','KH1',20000000,N'VẬN CHUYỂN','NV01'),
('NH02','21/07/2008','KH2',50000000,N'VẬN CHUYỂN','NV02'),
('NH03','10/04/2008','KH3',100000000,N'VẬN CHUYỂN','NV03'),
('NH04','05/03/2008','KH4',90000000,N'VẬN CHUYỂN','NV04'),
('NH05','11/09/2008','KH5',70000000,N'VẬN CHUYỂN','NV05')


INSERT INTO CTNHAP
VALUES 
('NH01','SP01',9500000,40),
('NH02','SP02',95000,50),
('NH03','SP03',7000,10),
('NH04','SP04',20000,50),
('NH05','SP05',500000,30)


SET DATEFORMAT DMY
INSERT INTO HOADON
VALUES 
('HD01','13/03/2021','KHA01',N'ĐÃ THANH TOÁN',90000000,'NV01'),
('HD02','13/03/2020','KHA02',N'ĐÃ THANH TOÁN',70000000,'NV02'),
('HD03','21/07/2020','KHA03',N'ĐÃ THANH TOÁN',20000000,'NV03'),
('HD04','13/07/2020','KHA04',N'ĐÃ THANH TOÁN',10000000,'NV04'),
('HD05','25/09/2020','KHA05',N'ĐÃ THANH TOÁN',10000000,'NV05')


INSERT INTO CTHD
VALUES
('HD01','SP01',10,9000000,'ST01'),
('HD02','SP02',30,3000000,'ST02'),
('HD03','SP03',50,2000000,'ST03'),
('HD04','SP04',30,1000000,'ST04'),
('HD05','SP05',89,13000000,'ST05')


SET DATEFORMAT DMY
INSERT INTO KHACHHANG
VALUES 
('KHA01',N'NGUYỄN THÀNH TRƯƠNG',N'NAM','13/02/2000',N'12 CMT8 P10 QUẬN 10','093200101',9),
('KHA02',N'NGUYỄN TIỂU MY',N'NỮ','30/10/2001',N'23 ĐỖ THỪA LUÔNG P2 QUẬN TÂN PHÚ','093229292',5),
('KHA03',N'TRẦN QUANG PHONG',N'NAM','27/02/2002',N'45 TRẦN HUY LIỆU P2 QUẬN PHÚ NHUẬN','093767676',2),
('KHA04',N'NGUYỄN TRẦN KIM NGÂN',N'NỮ','23/09/1999',N'67 NGUYỄN OANH P10 QUẬN GÒ VẤP','093211111',1),
('KHA05',N'TRẦN ĐỨC QUÂN',N'NAM','13/08/1998',N'32 NGUYỄN THÔNG P9 QUẬN 10','093131313',12)


select * from NHAPHANG